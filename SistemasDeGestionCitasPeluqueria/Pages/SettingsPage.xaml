<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="SistemasDeGestionCitasPeluqueria.Pages.SettingsPage"
             Title="Ajustes"
             BackgroundColor="{DynamicResource SettingsPageBackground}"
             Padding="12">

    <ScrollView>
        <Grid HorizontalOptions="FillAndExpand">
            <!-- CONTENIDO: ahora se estira a todo el ancho disponible -->
            <VerticalStackLayout Spacing="18" Padding="0,10,0,40" HorizontalOptions="FillAndExpand">

                <!-- Header -->
                <VerticalStackLayout Spacing="4">
                    <Label Text="Ajustes" Style="{StaticResource TitleLargeStyle}" />
                    <Label Text="Configura tus preferencias" Style="{StaticResource MutedTextStyle}" />
                </VerticalStackLayout>

                <!-- Notificaciones -->
                <Frame Style="{StaticResource CardFrameStyle}" HasShadow="True" Padding="16" HorizontalOptions="FillAndExpand">
                    <VerticalStackLayout Spacing="12">
                        <HorizontalStackLayout Spacing="12" VerticalOptions="Center">
                            <Frame Style="{StaticResource InfoIconFrameStyle}" Background="{DynamicResource NotificationIconBgBrush}">
                                <Label FontFamily="{StaticResource SymbolThemeFontFamily}"
                                       Text="{StaticResource IconGlyph.Notification}"
                                       FontSize="18"
                                       TextColor="{DynamicResource TextPrimary}"
                                       VerticalTextAlignment="Center"
                                       HorizontalTextAlignment="Center"/>
                            </Frame>

                            <VerticalStackLayout>
                                <Label Text="Notificaciones" Style="{StaticResource InfoCardTitleStyle}" />
                                <Label Text="Recibe notificaciones relacionadas con tus reservas y novedades." Style="{StaticResource InfoCardSubTextStyle}" />
                            </VerticalStackLayout>
                        </HorizontalStackLayout>

                        <Grid ColumnDefinitions="*,Auto" RowSpacing="12">
                            <StackLayout Grid.Column="0" Spacing="4">
                                <Label Text="Recordatorios de cita" Style="{StaticResource BodyTextStyle}" />
                                <Label Text="Recibe recordatorios antes de tus citas" Style="{StaticResource MutedTextStyle}" />
                            </StackLayout>
                            <Switch Grid.Column="1" IsToggled="True" HorizontalOptions="End" VerticalOptions="Center" />
                        </Grid>

                        <Grid ColumnDefinitions="*,Auto" RowSpacing="12">
                            <StackLayout Grid.Column="0" Spacing="4">
                                <Label Text="Promociones y ofertas" Style="{StaticResource BodyTextStyle}" />
                                <Label Text="Recibe información sobre ofertas especiales" Style="{StaticResource MutedTextStyle}" />
                            </StackLayout>
                            <Switch Grid.Column="1" IsToggled="False" HorizontalOptions="End" VerticalOptions="Center" />
                        </Grid>

                        <Grid ColumnDefinitions="*,Auto" RowSpacing="12">
                            <StackLayout Grid.Column="0" Spacing="4">
                                <Label Text="Nuevos servicios" Style="{StaticResource BodyTextStyle}" />
                                <Label Text="Notificaciones de nuevos servicios disponibles" Style="{StaticResource MutedTextStyle}" />
                            </StackLayout>
                            <Switch Grid.Column="1" IsToggled="True" HorizontalOptions="End" VerticalOptions="Center" />
                        </Grid>
                    </VerticalStackLayout>
                </Frame>

                <!-- Idioma y Región -->
                <Frame Style="{StaticResource CardFrameStyle}" HasShadow="True" Padding="16" HorizontalOptions="FillAndExpand">
                    <VerticalStackLayout Spacing="12">
                        <HorizontalStackLayout Spacing="12" VerticalOptions="Center">
                            <Frame Style="{StaticResource InfoIconFrameStyle}" Background="{DynamicResource LocationIconBgBrush}">
                                <Label FontFamily="{StaticResource SymbolThemeFontFamily}"
                                       Text="{StaticResource IconGlyph.Location}"
                                       FontSize="18"
                                       TextColor="{DynamicResource TextPrimary}"
                                       VerticalTextAlignment="Center"
                                       HorizontalTextAlignment="Center"/>
                            </Frame>

                            <VerticalStackLayout>
                                <Label Text="Idioma y Región" Style="{StaticResource InfoCardTitleStyle}" />
                                <Label Text="Selecciona el idioma y la zona horaria" Style="{StaticResource InfoCardSubTextStyle}" />
                            </VerticalStackLayout>
                        </HorizontalStackLayout>

                        <Grid ColumnDefinitions="Auto,*"
                              RowDefinitions="Auto,Auto"
                              RowSpacing="10"
                              ColumnSpacing="12">
                            <Label Grid.Row="0" Grid.Column="0" Text="Idioma" VerticalOptions="Center" TextColor="{DynamicResource Gray600}" Margin="0,0,4,0" />
                            <Picker Grid.Row="0" Grid.Column="1" Title="Selecciona idioma" HorizontalOptions="FillAndExpand" VerticalOptions="Center" HeightRequest="44">
                                <Picker.ItemsSource>
                                    <x:Array Type="{x:Type x:String}">
                                        <x:String>Español</x:String>
                                        <x:String>Inglés</x:String>
                                    </x:Array>
                                </Picker.ItemsSource>
                            </Picker>

                            <Label Grid.Row="1" Grid.Column="0" Text="Zona horaria" VerticalOptions="Center" TextColor="{DynamicResource Gray600}" Margin="0,0,4,0" />
                            <Picker Grid.Row="1" Grid.Column="1" Title="Selecciona zona" HorizontalOptions="FillAndExpand" VerticalOptions="Center" HeightRequest="44">
                                <Picker.ItemsSource>
                                    <x:Array Type="{x:Type x:String}">
                                        <x:String>Europa/Madrid</x:String>
                                        <x:String>UTC</x:String>
                                    </x:Array>
                                </Picker.ItemsSource>
                            </Picker>
                        </Grid>
                    </VerticalStackLayout>
                </Frame>

                <!-- Apariencia -->
                <Frame Style="{StaticResource CardFrameStyle}" HasShadow="True" Padding="16" HorizontalOptions="FillAndExpand">
                    <VerticalStackLayout Spacing="12">
                        <HorizontalStackLayout Spacing="12" VerticalOptions="Center">
                            <Frame Style="{StaticResource InfoIconFrameStyle}" Background="{DynamicResource SettingsIconBgBrush}">
                                <Label FontFamily="{StaticResource SymbolThemeFontFamily}"
                                       Text="{StaticResource IconGlyph.Settings}"
                                       FontSize="18"
                                       TextColor="{DynamicResource TextPrimary}"
                                       VerticalTextAlignment="Center"
                                       HorizontalTextAlignment="Center"/>
                            </Frame>

                            <VerticalStackLayout>
                                <Label Text="Apariencia" Style="{StaticResource InfoCardTitleStyle}" />
                                <Label Text="Preferencias de tema" Style="{StaticResource InfoCardSubTextStyle}" />
                            </VerticalStackLayout>
                        </HorizontalStackLayout>

                        <Grid ColumnDefinitions="*,Auto" RowSpacing="8">
                            <StackLayout Grid.Column="0" Spacing="2">
                                <Label Text="Modo oscuro" Style="{StaticResource BodyTextStyle}" />
                                <Label Text="Activa el tema oscuro" Style="{StaticResource MutedTextStyle}" />
                            </StackLayout>
                            <Switch Grid.Column="1" IsToggled="False" HorizontalOptions="End" VerticalOptions="Center" />
                        </Grid>
                    </VerticalStackLayout>
                </Frame>

                <!-- Acción: Guardar / Cancelar (se envuelve si no cabe) -->
                <FlexLayout Direction="Row"
                            Wrap="Wrap"
                            JustifyContent="End"
                            AlignItems="Center"
                            AlignContent="End"
                            Padding="0,6,0,0">
                    <Button Text="Cancelar"
                            Style="{StaticResource SecondaryButtonStyle}"
                            WidthRequest="110"
                            Margin="0,0,12,12"/>
                    <Button Text="Guardar cambios"
                            Style="{StaticResource PrimarySuccessButton}"
                            WidthRequest="140"
                            Margin="0,0,12,12"/>
                </FlexLayout>

            </VerticalStackLayout>
        </Grid>
    </ScrollView>
</ContentPage>
